apiVersion: v1
kind: Pod
metadata:
  name: test-runner-{{.TestId}}
  labels:
    app: venus-testrunner-pod
    apptype: testrunner
    testid: {{.TestId}}
spec:
  restartPolicy: OnFailure
  initContainers:
  containers:
    - name: venus-testrunner
      image: "{{if gt (len .PrivateRegistry) 0}}{{.PrivateRegistry}}/{{end}}filvenus/testrunner:347f852d52402c60c512fd5014a3ee4065f2777f"
      imagePullPolicy: IfNotPresent
      args: ["--log-level=DEBUG","--config=/shared-dir/k8stest/config-template.toml", "--plugins=/shared-dir/k8stest/plugins", "--taskId={{.TaskID}}"]
      env:
        - name: PRODUCTION
          value: "true"
      volumeMounts:
        - mountPath: /shared-dir
          name: shared-dir-v
  volumes:
    - name: shared-dir-v
      persistentVolumeClaim:
        claimName: testnet-shared-dir