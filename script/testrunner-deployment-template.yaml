apiVersion: v1
kind: Pod
metadata:
  name: test-runner-{{.TestId}}
  labels:
    app: venus-testrunner-pod
    apptype: testrunner
    testid: {{.TestId}}
spec:
  initContainers:
  containers:
    - name: venus-testrunner
      image: "{{if gt (len .PrivateRegistry) 0}}{{.PrivateRegistry}}/{{end}}filvenus/testrunner:1be7b38b7dda0ee53033e553099fcd3796bc12c7"
      imagePullPolicy: IfNotPresent
      args: ["--log-level=DEBUG","--config=/shared-dir/k8stest/config-template.toml", "--plugins=/shared-dir/k8stest/plugins", "--taskId={{.TaskID}}"]
      env:
        - name: PRODUCTION
          value: "true"
      volumeMounts:
        - mountPath: /shared-dir
          name: shared-dir-v
  volumes:
    - name: shared-dir-v
      persistentVolumeClaim:
        claimName: testnet-shared-dir